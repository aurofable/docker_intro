<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>Lunch &amp; Learn: An Introduction to Docker</title>

        <meta name="description" content="Simple talk about docker">
        <meta name="author" content="James Chun">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/solarized.css" id="theme">

        <!-- Code syntax highlighting -->
        <link rel="stylesheet" href="lib/css/zenburn.css">

        <!-- Printing and PDF exports -->
        <script>
            var link = document.createElement( 'link' );
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
            document.getElementsByTagName( 'head' )[0].appendChild( link );
        </script>

        <!--[if lt IE 9]>
            <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="reveal">

            <!-- Any section element inside of this container is displayed as a slide -->
            <div class="slides">
                <section>
                    <h1>An Introduction to Docker</h1>
                    <h3><font color="#990000">l<sup>2</sup></font></h3>
                    <p>
                        <small>A brief talk by <a href="http://github.com/aurofable">James</a></small>
                    </p>
                </section>

                <section>
                    <h2>Disclaimer</h2>
                    <div>
                        <img src="static/docker_small_v-dark.png" style="width: 432px; height: 376px; max-height: none; max-width: none;"/>
                        <br/>
                    </div>
                    <ul>
                        <li>
                            Most of this talk was scaveneged from these <a href="https://github.com/pointful/docker-intro">Docker Slides</a><br/>
                        </li>
                        <li>
                            Hopefully most of this is correct - I'm still pretty new to docker
                        </li>
                    </ul>
                </section>

                <section>
                        <h2>The Challenge</h2>
                        <p>
                            <img src="static/docker_the_challenge.png">
                        </p>
                </section>

                <section>
                        <p>
                            <img src="static/docker_matrix_1.png">
                        </p>
                </section>

                <section>
                        <p>
                            <img src="static/docker_shipping_container.png">
                        </p>
                </section>

                <section>
                        <p>
                            <img src="static/docker_matrix_2.png">
                        </p>
                </section>

                <section>
                    <h2>Why Developers Care</h2>
                    <div style="text-align: left;">
                        Build once... (finally) run <i><font color="#073763">anywhere<b>*</b></font></i>
                        <ul>
                            <li class="fragment" data-fragment-index="0">A clean, safe, hygienic, portable runtime environment for your app.</li>
                            <li class="fragment" data-fragment-index="1">No worries about missing dependencies, packages and other pain points during subsequent deployments.</li>
                            <li class="fragment" data-fragment-index="2">Run each app in its own isolated container, so you can run various versions of libraries and other dependencies for each app without worrying.</li>
                            <li class="fragment" data-fragment-index="3">Automate testing, integration, packaging.</li>
                            <li class="fragment" data-fragment-index="4">Reduce/eliminate concerns about compatibility on different platforms, either your own or your customers.</li>
                            <li class="fragment" data-fragment-index="5">Cheap, zero-penalty containers to deploy services. Instant replay and reset of image snapshots.</li>
                        </ul>
                    </div>
                    <div style="text-align: center; font-size: 24px; line-height: 1.1em; ">
                        <i><font color="#073763">* Where "anywhere" means an x86 server running a modern Linux kernel<br/>
                                (3.2+ generally or 2.6.32+ for RHEL 6.5+,&nbsp;Fedora, &amp; related)</font></i>
                    </div>
                </section>

                <section>
                    <h2>Why Administrators Care</h2>
                    <div style="text-align: left;">
                        Configure once... run anything
                        <ul>
                            <li class="fragment" data-fragment-index="0">Make the entire lifecycle more efficient, consistent, and repeatable</li>
                            <li class="fragment" data-fragment-index="1">Increase the quality of code produced by developers.</li>
                            <li class="fragment" data-fragment-index="2">Eliminate inconsistencies between development, test, production, and customer environments.</li>
                            <li class="fragment" data-fragment-index="3">Support segregation of duties.</li>
                            <li class="fragment" data-fragment-index="4">Significantly improves the speed and reliability of continuous deployment and continuous integration systems.</li>
                            <li class="fragment" data-fragment-index="5">Because the containers are so lightweight, address significant performance, costs, deployment, and portability issues normally associated with VMs.</li>
                        </ul>
                </section>


                <section>
                    <h2>Why it Works: Separation of Concerns</h2>
                    <p>
                    <img src="static/docker_separation_of_concerns.png">
                    </p>
                </section>

                <section>
                    <h2>More Technical Details</h2>
                    <div style="position: absolute; left: 1%; top: 100px; width: 48%;" class="absolute-element">
                        <p><b>Why</b></p>
                        <ul style="text-align: left; line-height=1.1em;">
                            <li class="fragment" data-fragment-index="0">Run everywhere</li>
                            <ul style="font-size: 24px;" class="fragment" data-fragment-index="0">
                                <li>Regardless of kernel version</li>
                                <li>Regardless of host distro</li>
                                <li>Physical or virtual, cloud or not</li>
                                <li>Container and host architecture must match...</li>
                            </ul>
                            <li class="fragment" data-fragment-index="1">Run anything</li>
                            <ul style="font-size: 24px;" class="fragment" data-fragment-index="1">
                                <li>If it can run on the host, it can run in the container</li>
                                <li>If it can run on a Linux kernel, it can run</li>
                            </ul>
                        </ul>
                    </div>
                    <div style="position: absolute; left: 52%; top: 100px; width: 48%;" class="absolute-element">
                        <p><b>What</b></p>
                        <ul style="text-align: left; line-height=1.1em;">
                            <li class="fragment" data-fragment-index="2">High level: a lightweight VM</li>
                            <ul style="font-size: 24px;" class="fragment" data-fragment-index="2">
                                <li>Own process space</li>
                                <li>Own network interface</li>
                                <li>Can run stuff as root</li>
                                <li>Can have its own /sbin/init (different from host)</li>
                                <li>&lt;&lt;machine container&gt;&gt;</li>
                            </ul>
                            <li class="fragment" data-fragment-index="3">Low level: chroot on steroids</li>
                            <ul style="font-size: 24px;" class="fragment" data-fragment-index="3">
                                <li>Can also <i>not </i>have its own /sbin/init</li>
                                <li>Container = isolated processes</li>
                                <li>Share kernel with host</li>
                                <li>No device emulation</li>
                            <li>&lt;&lt;application container&gt;&gt;</li>
                            </ul>
                        </ul>
                    </div>
                </section>

                <section>
                    <h2>How it Works: Linux Containers (LXC)</h2>
                    <p>
                    <img src="static/lxc.png">
                    </p>
                    <ul>
                        <li class="fragment" data-fragment-index="0">OS-level virtualization via a virtual environment that has its own process and network space</li>
                        <li class="fragment" data-fragment-index="1">cgroups and kernel namespace isolation released in 2.6.24</li>
                        <li class="fragment" data-fragment-index="2">Docker typically uses LXC (I think) for virtualization</li>
                    </ul>
                </section>

                <section>
                    <h2>How it Works: Linux Containers (LXC)</h2>
                    <p>
                    <img src="static/docker_linux_interfaces.svg.png" style="width: 432px; height: 376px; max-height: none; max-width: none;"/>
                    </p>
                    <ul>
                        <li class="fragment" data-fragment-index="0">Originally written internally by dotCloud.</li>
                        <li class="fragment" data-fragment-index="1">Now an open source project and commercial entity, as far as I can tell.</li>
                    </ul>
                </section>

                <section>
                    <h2>VMs vs Containers</h2>
                    <p>
                    <img src="static/docker_containers_vs_vms.png">
                    </p>
                </section>

                <section>
                    <h2>Why are Docker Containers Lightweight?</h2>
                    <p>
                    <img src="static/docker_why_are_containers_lightwight.png">
                    </p>
                </section>

                <section>
                    <h2>What are the Basics of a Docker System?</h2>
                    <p>
                    <img src="static/docker_basics_of_docker_system.png">
                    </p>

                    <aside class="notes">
                        Walk through Dockerfile used for serving this presentation. <br/>
                        1. vim Dockerfile, walk through scripts<br/>
                        2. docker build -t "james/docker-reveal-test.js:latest" .<br/>
                        3. docker push james/docker-reveal-test.js<br/>
                        4. docker run -d -p 8888:8000 -v $(pwd):/slides/ "james/docker-reveal-test.js:latest"<br/>
                    </aside>
                </section>

                <section>
                    <h2>Basic workflow</h2>
                    <p>

                    <h4>Create a Dockerfile</h4>
                    <pre><code data-trim>
FROM debian:8.0
# Install systems 
RUN apt-get update; apt-get install procps -yy
...
                    </code></pre>

                    <h4>Build an image</h4>
                    <pre><code class="bash" data-trim>$ docker build -t "james/docker-reveal-test.js:latest" .</code></pre>

                    <h4>Pushing the image</h4>
                    <pre><code class="bash" data-trim>$ docker push james/docker-reveal-test.js</code></pre>

                    <h4>Running the container</h4>
                    <pre><code class="bash" data-trim>$ docker run -d -p 8888:8000 -v $(pwd):/slides/ "james/docker-reveal-test.js:latest"</code></pre>

                    <h4>View presentation</h4>
                    View at http://$(boot2docker ip):8888
                    </p>

                    <aside class="notes">
                        Walk through Dockerfile used for serving this presentation. <br/>
                        1. vim Dockerfile, walk through scripts<br/>
                        2. docker build -t "james/docker-reveal-test.js:latest" .<br/>
                        3. docker push james/docker-reveal-test.js<br/>
                        4. docker run -d -p 8888:8000 -v $(pwd):/slides/ "james/docker-reveal-test.js:latest"<br/>
                    </aside>
                </section>


                <section>
                    <h2>Changes and Updates</h2>
                    <p>
                    <img src="static/docker_changes_and_updates.png">
                    </p>
                </section>

                <section>
                    <h2>Docker Basics</h2>
                    <ul>
                        <li>Image</li>
                        <li>Registry</li>
                        <li>Container</li>
                    </ul>
                    <div style="text-align: center; font-size: 16px; line-height: 1.1em; margin-top:20px">
                        <a href="https://docs.docker.com/installation/">Installation</a><br/>
                        <a href="https://docs.docker.com/articles/basics/">Basics</a><br/>
                    </div>
                </section>

                <section>

                    <section>
                        <h1>Demo</h1>
                    </section>

                    <section>
                        <h1>Local Web Development</h1>
                    </section>

                    <section>
                        <h1>Local Distributed System / Cluster</h1>
                        Running + Testing
                    </section>

                    <section>
                        <h2>Example: Kafka Cluster</h2>
                        <a href="https://github.com/wurstmeister/kafka-docker">kafka-docker</a><br/>
                        <a href="https://docs.docker.com/compose/">docker-compose</a><br/>
                    </section>

                    <section>
                        <p>

                        <h4>Start the cluster</h4>
                        <pre><code class="bash" data-trim>$ docker-compose up</code></pre>

                        <h4>Scale cluster</h4>
                        <pre><code class="bash" data-trim>$ docker-compose scale kafka=5</code></pre>

                        </p>
                    </section>


                    <section>
                        <p>

                        <h4>Get a shell</h4>
                        <pre><code class="bash" data-trim>$ start-kafka-shell.sh <DOCKER_HOST_IP> <ZK_HOST:ZK_PORT></code></pre>

                        <h4>Create topic and start producer</h4>
                        <pre><code class="bash" data-trim>
                            $ $KAFKA_HOME/bin/kafka-topics.sh --create --topic topic \
--partitions 4 --zookeeper $ZK --replication-factor 2
$ $KAFKA_HOME/bin/kafka-topics.sh --describe --topic topic --zookeeper $ZK 
$ $KAFKA_HOME/bin/kafka-console-producer.sh --topic=topic \
--broker-list=`broker-list.sh`

                        </code></pre>

                        <h4>Start another shell, and consume</h4>
                        <pre><code class="bash" data-trim>$ $KAFKA_HOME/bin/kafka-console-consumer.sh --topic=topic --zookeeper=$ZK</code></pre>
                        
                    
                        </p>
                    </section>

                    <section>
                            <h2>Idea: Simulate network failures</h2>
                            <p>
                                Similar to the <a href="http://aphyr.com/tags/jepsen">Jepsen</a> series.<br/>
                                For docker, there is <a href="https://github.com/dcm-oss/blockade">blockade</a>.
                            </p>
                    </section>

                    <section>
                        <h1>Local blockchain systems</h1>
                    </section>

                     <section>
                        <h2>Example: Bitcoin Test Network</h2>

                        <h4>Get code for presentation, on gh-pages branch, and enter bitcoin dir</h4>
                        <pre><code class="bash" data-trim>$ cd bitcoin</code></pre>

                        <h4>Build images</h4>
                        <pre><code class="bash" data-trim>$ make build</code></pre>
                    </section>

                    <section>

                        <h4>Start up two bitcoin nodes/containers, in separate terminals</h4>
                        <pre><code class="bash" data-trim>$ make alice_shell</code></pre>
                        <pre><code class="bash" data-trim>$ make bob_shell</code></pre>

                        <h4>Startup bitcoin daemon in both</h4>
                        <pre><code class="bash" data-trim>$ startup</code></pre>

                        <h4>Get information</h4>
                        <pre><code class="bash" data-trim>$ getinfo</code></pre>

                        <h4>Get network peers - there should be none</h4>
                        <pre><code class="bash" data-trim>$ getpeerinfo</code></pre>

                        <h4>Try connecting on network - peerinfo should be populated now</h4>
                        <pre><code class="bash" data-trim>$ tryconnect</code></pre>

                    </section>

                    <section>

                        <h4>Check balance</h4>
                        <pre><code class="bash" data-trim>$ getbalance</code></pre>

                        <h4>Mine some blocks, in either terminal</h4>
                        <pre><code class="bash" data-trim>$ mine 101</code></pre>

                        <h4>Balance should have changed, generate new address to receive payment</h4>
                        <pre><code class="bash" data-trim>$ getnewaddress</code></pre>

                        <h4>Send bitcoins to new address</h4>
                        <pre><code class="bash" data-trim>$ sendtoaddress $address $amt</code></pre>

                        <h4>Mine some blocks for verification, check balances after</h4>
                        <pre><code class="bash" data-trim>$ mine 4</code></pre>

                    </section>

                </section>

                <section>
                    <h2>Ecosystem Support</h2>
                    <font style="font-size: 28px; line-height: 1.1em; ">
                        <ul>
                            <li class="fragment" data-fragment-index="0">Operating systems</li>
                            <ul>
                                <li class="fragment" data-fragment-index="0">Virtually any distribution with a 2.6.32+ kernel</li>
                                <li class="fragment" data-fragment-index="0">Red Hat/Docker collaboration to make work across RHEL 6.4+, Fedora, and other members of the family (2.6.32 +)</li>
                                <li class="fragment" data-fragment-index="0">CoreOS—Small core OS purpose built with Docker</li>
                            </ul>
                            <li class="fragment" data-fragment-index="1">Private PaaS</li>
                            <ul>
                                <li data-fragment-index="1" class="fragment">OpenShift, Solum (Rackspace, OpenStack), Other TBA</li>
                            </ul>
                            <li class="fragment" data-fragment-index="2">Public PaaS</li>
                            <ul>
                                <li data-fragment-index="2" class="fragment">Deis, Voxoz, Cocaine (Yandex), Baidu PaaS</li>
                            </ul>
                            <li data-fragment-index="3" class="fragment">Public IaaS</li>
                            <ul>
                                <li data-fragment-index="3" class="fragment">Native support in Rackspace, Digital Ocean,+++</li>
                                <li data-fragment-index="3" class="fragment">AMI (or equivalent) available for AWS &amp; other</li>
                            </ul>
                            <li data-fragment-index="4" class="fragment">DevOps Tools</li>
                            <ul>
                                <li data-fragment-index="4" class="fragment">Integrations with Chef, Puppet, Jenkins, Travis, Salt, Ansible +++</li>
                            </ul>
                            <li data-fragment-index="5" class="fragment">Orchestration tools</li>
                            <ul>
                                <li data-fragment-index="5" class="fragment">Mesos, Heat, ++</li>
                                <li data-fragment-index="5" class="fragment">Shipyard &amp; others purpose built for Docker</li>
                            </ul>
                            <li data-fragment-index="6" class="fragment">Applications</li>
                            <ul>
                                <li data-fragment-index="6" class="fragment">1000’s of Dockerized applications available at index.docker.io</li>
                            </ul>
                        </ul>
                    </font>
                </section>

                <section>
                    <h2>Pretty Code</h2>
                    <pre><code data-trim contenteditable>
function linkify( selector ) {
  if( supports3DTransforms ) {

    var nodes = document.querySelectorAll( selector );

    for( var i = 0, len = nodes.length; i &lt; len; i++ ) {
      var node = nodes[i];

      if( !node.className ) {
        node.className += ' roll';
      }
    }
  }
}
                    </code></pre>
                    <p>Code syntax highlighting courtesy of <a href="http://softwaremaniacs.org/soft/highlight/en/description/">highlight.js</a>.</p>
                </section>

                <section>
                    <h2>Speaker View</h2>
                    <p>There's a <a href="https://github.com/hakimel/reveal.js#speaker-notes">speaker view</a>. It includes a timer, preview of the upcoming slide as well as your speaker notes.</p>
                    <p>Press the <em>S</em> key to try it out.</p>

                    <aside class="notes">
                        Oh hey, these are some notes. They'll be hidden in your presentation, but you can see them if you open the speaker notes window (hit 's' on your keyboard).
                    </aside>
                </section>

                <section style="text-align: left;">
                    <h1>THE END</h1>
                    <p>
                    <a href="https://github.com/aurofable/docker_intro">Source code, documentation &amp; presentation</a>
                    </p>
                </section>

            </div>

        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>

        <script>

// Full list of configuration options available at:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({
    controls: true,
    progress: true,
    history: true,
    center: true,

    transition: 'convex', // none/fade/slide/convex/concave/zoom

    // Optional reveal.js plugins
    dependencies: [
    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
    { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
    { src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
    { src: 'plugin/zoom-js/zoom.js', async: true },
    { src: 'plugin/notes/notes.js', async: true }
    ]
});

        </script>

    </body>
</html>
